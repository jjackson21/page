(function(c){c.fn.tip=function(e){var f=c.extend({},c.fn.tip.defaults,e);if(f.onHover){if(f.stickIfCurrent){this.filter("."+f.currentClass).each(function(g){c(this).createTip(f)})}if(f.reverseHover){c(this).createTip(f);this.hover(function(){if(!f.stickIfCurrent||!c(this).hasClass(f.currentClass)){c(this).hideTip()}},function(){c(this).showTip(f)})}else{this.hover(function(){c(this).showTip(f)},function(){if(!f.stickIfCurrent||!c(this).hasClass(f.currentClass)){c(this).hideTip()}})}}else{this.createTip(f)}return this};c.fn.tip.defaults={content:false,onHover:true,reverseHover:false,stickIfCurrent:false,currentClass:"current",offset:4,position:"top",animationOffset:4,delay:0};c.fn.showTip=function(e){var f=c.extend({},c.fn.tip.defaults,e);this.each(function(j){var h=c(this);var l=(c.browser.msie&&c.browser.version<9);var k=h.data("tip");if(!k){h.createTip(f,l?false:true);k=h.data("tip")}else{if(f.content!==h.data("settings").content){h.updateTipContent(e.content)}}if(!l){var g=a(h,k,f,false);k.stop(true).animate({opacity:1,top:g.top,left:g.left},"fast")}});return this};c.fn.hideTip=function(){this.each(function(g){var f=c(this);var j=f.data("tip");if(j){var h=f.data("settings");if(c.browser.msie&&c.browser.version<9){j.children(".arrow").remove();this.title=j.html();f.data("tip",false);j.remove()}else{var e=b(j,h);var k=j.offset();switch(e){case"right":k.left+=h.animationOffset+h.offset;break;case"bottom":k.top+=h.animationOffset+h.offset;break;case"left":k.left-=h.animationOffset+h.offset;break;default:k.top-=h.animationOffset+h.offset;break}j.remove()}}});return this};c.fn.createTip=function(f,e){this.each(function(j){var h=c(this);var g=d();g.append("<div></div>");var k=g.children(":last-child");if(f.position=="right"||h.hasClass("tip-right")||h.parent().hasClass("children-tip-right")){k.addClass("tip-right")}else{if(f.position=="bottom"||h.hasClass("tip-bottom")||h.parent().hasClass("children-tip-bottom")){k.addClass("tip-bottom")}else{if(f.position=="left"||h.hasClass("tip-left")||h.parent().hasClass("children-tip-left")){k.addClass("tip-left")}}}k.data("node",h);h.data("tip",k);h.data("settings",f);h.updateTipContent(f.content,e);if(e){k.css({opacity:0})}});return this};c.fn.updateTipContent=function(f,e){this.each(function(j){var h=c(this);var l=h.data("tip");var k=h.data("settings");if(!f){if(this.title&&this.title.length>0){var m=this.title;this.title=""}else{var n=h.find("[title]:first");if(n.length>0){var m=n.attr("title");n.attr("title","")}else{var m=h.text()}}}else{var m=f}if(!m||c.trim(m).length==0){m="<em>No tip</em>"}l.html(m+'<span class="arrow"><span></span></span>');l.stop(true,true);var g=a(h,l,k,e);l.offset(g)});return this};c.fn.refreshTip=function(){this.each(function(f){var g=c(this).data("settings");if(g&&g.stickIfCurrent){var e=c(this);if(e.hasClass(g.currentClass)){e.showTip(g)}else{e.hideTip(g)}}});return this};function b(g,f){var e=f.position;if(g.hasClass("tip-right")){e="right"}else{if(g.hasClass("tip-bottom")){e="bottom"}else{if(g.hasClass("tip-left")){e="left"}}}return e}function a(f,h,g,j){var i=f.offset();var e=b(h,g);switch(e){case"right":return{top:Math.round(i.top+(f.outerHeight()/2)-(h.outerHeight()/2)),left:Math.round(i.left+f.outerWidth()+(j?g.animationOffset+g.offset:g.offset))};break;case"bottom":return{top:Math.round(i.top+f.outerHeight()+(j?g.animationOffset+g.offset:g.offset)),left:Math.round(i.left+(f.outerWidth()/2)-(h.outerWidth()/2))};break;case"left":return{top:Math.round(i.top+(f.outerHeight()/2)-(h.outerHeight()/2)),left:Math.round(i.left-h.outerWidth()-(j?g.animationOffset+g.offset:g.offset))};break;default:return{top:Math.round(i.top-h.outerHeight()-(j?g.animationOffset+g.offset:g.offset)),left:Math.round(i.left+(f.outerWidth()/2)-(h.outerWidth()/2))};break}}if(c.fn.addTemplateSetup){c.fn.addTemplateSetup(function(){this.find(".with-tip, .with-children-tip > *").tip()})}else{c(document).ready(function(){c(".with-tip, .with-children-tip > *").tip()})}function d(){var e=c("#tips");if(e.length==0){c(document.body).append('<div id="tips"></div>');e=c("#tips")}return e}c(window).resize(function(){d().children().each(function(j){var l=c(this);var h=l.data("node");var k=h.data("settings");var f=k.stickIfCurrent&&h.hasClass(k.currentClass);var g=(k.onHover&&!f);l.stop(true,true);var e=a(h,l,k,g);l.offset(e)})})})(jQuery);