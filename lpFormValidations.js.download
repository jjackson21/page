var jsonFormFields;var KeyValueFormFields;var ConversionURL;confirm_url_target="";function updateUI(){}$(document).ready(function(){PWInit();pageSize();$(window).resize(function(){pageSize()});replacePlaceHolders();prePopulateForm();storeBrowserData();$(".button").css("cursor","pointer");$(".button").click(function(a){if($(this).children("span.elButton").length>0){ValidateForm()}});$("a[data-rel*='_popup']").click(function(d){fire_link_click_event($(this),d);if(clickthroughs_objects[$(this).attr("id")]==null){return}var c=clickthroughs_objects[$(this).attr("id")]["deminision"].split(",");var b=c[0];var a=c[1];$.fancybox.open({href:$(this).attr("href"),width:parseInt(b),height:parseInt(a),type:"iframe",helpers:{overlay:{locked:false}},padding:5});return false});$("a").live("click",function(a){fire_link_click_event($(this),a)});fireClientPixel();if(!("placeholder" in document.createElement("input"))){$("input[placeholder], textarea[placeholder]").each(function(){var a=$(this).attr("placeholder");if(this.value==""){this.value=a}$(this).focus(function(){if(this.value==a){this.value=""}}).blur(function(){if($.trim(this.value)==""){this.value=a}})});$("form").submit(function(){$(this).find("input[placeholder], textarea[placeholder]").each(function(){if(this.value==$(this).attr("placeholder")){this.value=""}})})}});function PWInit(){try{jsonFormFields=getCookie("FormFields")}catch(a){return}if(jsonFormFields==null){return}try{jsonFormFields=$.evalJSON(jsonFormFields.replace(/jsonFormFields=/,""))}catch(a){return}}function ShowLoadingLayer(a){$("body").prepend('<div id="SaveMask" class="loading-maskPages"><span>'+a+"</span></div>");$(".loading-maskPages").height($(document).height())}function HideLoadingLayer(){$("#SaveMask").remove()}function fire_link_click_event(c,b){if(clickthroughs_objects[$(c).attr("id")]==null){return true}var f=clickthroughs_objects[$(c).attr("id")]["save_as_conversion"];var d=clickthroughs_objects[$(c).attr("id")]["conversion_code"];var a=clickthroughs_objects[$(c).attr("id")]["type"];if(a=="telephone"&&f==true&&d!=""){b.preventDefault()}$.ajax({url:location.protocol+"//"+document.domain+"/Handler/Clicklog.aspx?PageId="+page_id,type:"POST",async:false,dataType:"json",data:"mode=clicklog&url="+$(c).attr("href")+"&elementid="+$(c).parent().attr("id")+"&conversion="+f,success:function(e){if(e.result==1){if(a=="telephone"&&f==true&&d!=""){ShowLoadingLayer("Please wait ...");$("body").append(d);setTimeout(function(){location.href=$(c).attr("href");HideLoadingLayer();return true},4000);return false}}},error:function(e){return true}})}function fireClientPixel(){if(!jsonFormFields){return""}if(ConversionURL==null){return""}if(ConversionURL==""){return""}$("body").append($(ConversionURL))}function replacePlaceHolders(){$("#ElementsArea div.draggable.Htmlembed,#ElementsArea div.draggable.Text,#ElementsArea div.draggable.Headline").each(function(){var b=$(this).html();if(b.indexOf("{=")>-1){for(var a=0;a<jsonFormFields.length;a++){b=b.replace(new RegExp("{="+jsonFormFields[a].key+"}","g"),jsonFormFields[a].value)}$(this).html(b)}});if(location.hostname.indexOf("pagewiz.net")>-1){deleteCookie("FormFields")}}function storeBrowserData(){var a="";a+="pid="+escape(page_id);a+="&href="+escape(window.location.href);a+="&hostname="+escape(window.location.hostname);a+="&referrer="+escape(document.referrer);a+="&appCodeName="+escape(navigator.appCodeName);a+="&appName="+escape(navigator.appName);a+="&appVersion="+escape(navigator.appVersion);a+="&cookieEnabled="+escape(navigator.cookieEnabled);a+="&language="+escape(navigator.appCodeName);a+="&platform="+escape(navigator.platform);a+="&userAgent="+escape(navigator.userAgent);a+="&screenWidth="+escape(window.screen.width);a+="&screenHeight="+escape(window.screen.height);setCookie("BrowserData",a)}function setCookie(c,f){var d=new Date();d.setDate(d.getDate()+30);var h=d.getFullYear();var g=d.getMonth();var b=d.getDate();var a=new Date(h,g,b);var e=escape(f)+";domain=;path=/; expires="+a.toGMTString();document.cookie=c+"="+e}function getCookie(b){var c,a,e,d=document.cookie.split(";");for(c=0;c<d.length;c++){a=d[c].substr(0,d[c].indexOf("="));e=d[c].substr(d[c].indexOf("=")+1);a=a.replace(/^\s+|\s+$/g,"");if(a==b){return unescape(e)}}}function deleteCookie(a){document.cookie=a+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function pageSize(){if($("body").height()<$(window).height()){$("html").css("height","100%")}}function showAlert(a,b){switch(alert_type){case"msgbox":swal({title:"",text:b,type:"error",timer:5000});break;case"Tooltip_top":$(a).tip({content:b,onHover:false,position:"top",offset:10});break;case"Tooltip_Bottom":$(a).tip({content:b,onHover:false,position:"bottom",offset:10});break;default:$(a).tip({content:b,onHover:false,position:validation_dir,offset:10});break}$(a).focus()}function validate_form(a){$("input").hideTip();$("select").hideTip();$("textarea").hideTip();var b;var e;var d;var c=true;$("#"+a+" [data-validation]").each(function(f){b="";b=$(this).attr("data-validation");if(b==""){return true}e=b.split(",");for(var g=0;g<e.length;g++){switch(e[g]){case"required":if($(this).attr("type")=="checkbox"||$(this).attr("type")=="radio"){d=$(this).attr("name");if($('input[name="'+d+'"]:checked').val()==null){showAlert($(this).parent(),required_msg);c=false;return false}else{$(this).parent().hideTip()}}if($.trim($(this).val())==""){$(this).focus();c=false;showAlert($(this),required_msg);return false}else{$(this).hideTip()}break;case"email":if(ValidateEmail($.trim($(this).val()))==false){$(this).focus();c=false;showAlert($(this),email_msg);return false}else{$(this).hideTip()}break;break;case"url":if(is_url($.trim($(this).val()))==false){$(this).focus();c=false;showAlert($(this),"Please type a valid url");return false}else{$(this).hideTip()}break;case"number":if(isNumber($.trim($(this).val()))==false){$(this).focus();c=false;showAlert($(this),numeric_msg);return false}else{$(this).hideTip()}break}}});if(c==false){return false}ShowLoadingLayer("Sending Data ...");return true}function ValidateForm(){$("input").hideTip();$("select").hideTip();$("textarea").hideTip();var a="";validateStatus=true;$('[data-required*="True"]').each(function(b){if($(this).attr("type")=="checkbox"||$(this).attr("type")=="radio"){str_El_name=$(this).attr("name");if($('input[name="'+str_El_name+'"]:checked').val()==null){showAlert($(this).parent(),required_msg);validateStatus=false;return false}else{$(this).parent().hideTip()}}if($.trim($(this).val())==""){$(this).focus();validateStatus=false;showAlert($(this),required_msg);return false}else{$(this).hideTip()}});if(validateStatus==false){return false}$("[data-validation]").each(function(b){ValidationType=$(this).attr("data-validation");elmValue=$.trim($(this).val());switch(ValidationType){case"None":break;case"Email":if(ValidateEmail(elmValue)==false){$(this).focus();validateStatus=false;showAlert($(this),email_msg);return false}else{$(this).hideTip()}break;case"AlphaNumeic":if(isAlphaNumeric(elmValue)==false){$(this).focus();validateStatus=false;showAlert($(this),alphanumeric_msg);return false}else{$(this).hideTip()}break;case"AlphaBetic":if(isAlphabetic(elmValue)==false){$(this).focus();validateStatus=false;showAlert($(this),alphabetic_msg);return false}else{$(this).hideTip()}break;case"Numeric":if(isNumberonly(elmValue)==true){$(this).focus();validateStatus=false;showAlert($(this),numeric_msg);return false}else{$(this).hideTip()}break}});if(validateStatus==false){return false}document.frm.submit();$("body").prepend('<div id="SaveMask" class="loading-maskPages"><span>Sending Data ...</span></div>')}function ValidateEmail(a){if(a.length==0){return true}var b=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(b.test(a)==false){return false}return true}function isAlphabetic(a){if(a.length==0){return true}if(hasNumbers(a)==false){return true}return false}function hasNumbers(a){var b=/\d/g;return b.test(a)}function isAlphaNumeric(a){if(a.match(/^[a-zA-Z0-9]+$/)){return true}return false}function isNumber(a){if(a.length==0){return true}return !isNaN(parseFloat(a))&&isFinite(a)}function isNumberonly(a){if(a.length==0){return true}return isNaN(a)}function is_url(a){var b=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;return b.test(a)}function handle_form_confirmation(g,b){var c=JSON.parse($("#"+b+" #submission_action").val());var f=Object.keys(c)[0];$("#SaveMask").remove();switch(f){case"message_box":$('input[type="text"]').val("");$("textarea").val("");$("select").prop("selectedIndex",0);swal({title:"",text:c[f]["message"],type:"success",timer:3000});break;case"redirect_to_url":var e=c[f]["url"];if(parseInt(pwplanid)>2&&GetQueryVariable(location.href,"pwpass")=="1"){e=ConcatenateFormValuesToURL(e,b)}if(c[f]["target"]=="_self"||c[f]["target"]==null||c[f]["target"]==undefined){location.href=e;return}var d=c[f]["width"];var a=c[f]["height"];$('input[type="text"]').val("");$("textarea").val("");$("select").prop("selectedIndex",0);$.fancybox.open({href:e,width:parseInt(d),height:parseInt(a),type:"iframe",helpers:{overlay:{locked:false}},padding:5});break;case"redirect_to_file":location.href=c[f]["url"];break}}function ConcatenateFormValuesToURL(b,a){var c=b;$("#"+a+" .field-container:has(input[type='text'],select)").each(function(e){if($(this).attr("data-fieldid")!=null){var g=$(this).find(".field-label").text().replace("*","");var f=$(this).attr("data-fieldid");var d=$("#"+f).val();c=ReplaceQueryString(c,g,d)}});return c}function handleComfirmation(b){if(!b){return}$('input[type="text"]').val("");$("textarea").val("");$("select").prop("selectedIndex",0);$("#SaveMask").remove();switch(confirm_type){case"alert":swal({title:"",text:confirm_msg,type:"success",timer:3000});break;case"webpage":if(confirm_url_target=="_self"||confirm_url_target==""){location.href=confirm_url;return}var d=confirm_popup_deminision.split(",");var c=d[0];var a=d[1];$.fancybox.open({href:confirm_url,width:parseInt(c),height:parseInt(a),helpers:{overlay:{locked:false}},type:"iframe",padding:5});break;case"file":location.href=confirm_url;break}}function getValueFromQuerystring(c,b){try{return GetQueryVariable(c,$.trim(b))}catch(a){return 0}}function prePopulateForm(){$(".TopHolder label").each(function(a){var b=getValueFromQuerystring(location.href,$(this).text());if(b!=0){$(this).parent().find(".el").not('[type="checkbox"]').not('[type="radio"]').val(decodeURIComponent(b))}});$(".field-container").each(function(a){var b=getValueFromQuerystring(location.href,$(this).find(".field-label").text().replace("*",""));if(b!=0){$(this).find("input[type='text'],input[type='hidden'],select").val(decodeURIComponent(b))}})}function GetQueryVariable(d,a){if(d.indexOf("?")==0){d=d.substr(1)}else{d=d.substring(d.indexOf("?")+1,d.length)}var c=d.split("&");for(var b=0;b<c.length;b++){var e=c[b].split("=");if(decodeURIComponent(e[0].toLowerCase())==a.toLowerCase()){return e[1]}}return 0}function ReplaceQueryString(a,f,j){var i="";var c="";var h="";var e=a.indexOf("?"+f+"=");var d=a.indexOf("&"+f+"=");if(e==-1&&d==-1){i=a;if(a.indexOf("?")>-1){c="&"+f+"="+j}else{c="?"+f+"="+j}}else{var b;if(e>-1){b=e+1}else{b=d+1}var k=a.indexOf("=",b);i=a.substring(0,k)+"="+j;var g=a.indexOf("&",b);c="";if(g>-1){c=a.substring(g)}}h=i+c;return h};